import{i as Q,h as R,s as S,j as L,r as x,o as v,c as b,k as u,x as f,a as o,z as p,u as j,t as g,F as T,y as U,A as $,w as C,d as G,B as H,J as I,m as K,n as N,f as V,p as O}from"./index-3e24f392.js";import{_ as F}from"./LinkButton-d0c47520.js";const W={class:"h-screen flex w-full justify-center"},X={class:"h-screen justify-center flex flex-col flex-1"},Y={class:"mt-3 text-center"},Z=H('<p> В этом тесте вам будут показывать слова, обозначающие цвета.</p><p> Если слово и его цвет совпадают, нажмите стрелку <b>◄влево◄</b></p><p> Если слово и его цвет различаются, нажмите стрелку <b>►вправо►</b></p><p> Например:</p><p><span class="text-red-600 font-bold">красный</span> — влево ◄ </p><p><span class="text-green-600 font-bold">синий</span> — вправо ► </p><p><b>Постарайтесь выполнить тест как можно быстрее и без ошибок.</b></p>',7),oo={class:"h-screen justify-center flex flex-col flex-1"},eo={class:"h-screen justify-center flex flex-col flex-0"},to=o("h1",null," Приготовьтесь... ",-1),ro=o("p",null,"(нажмите любую клавишу)",-1),co=[to,ro],so={class:"h-screen justify-center flex flex-col flex-0"},lo=o("h1",null,"Итоговый счет ",-1),no={class:"border border-neutral-700"},io=o("tr",null,[o("th",{class:"pr-3 border"}),o("th",{class:"pr-3 border text-center"},"справа"),o("th",{class:"pr-3 border text-center"},"центр"),o("th",{class:"pr-3 border text-center"},"слева"),o("th",{class:"pr-3 border text-center"},"направление"),o("th",{class:"pr-3 border text-center"},"реакция")],-1),ao={class:"pr-3 border"},_o={class:"pr-3 border text-center"},uo={class:"pr-3 border text-center"},fo={class:"mt-3 text-center font-bold"},po={key:1,class:"mt-3 text-center font-bold"},mo={__name:"StroopPage",async setup(go){let h,D;const z=Q("uid"),y=([h,D]=R(()=>I(K(N,"users",z))),h=await h,D(),h).data(),l=S("init"),r=[{title:"красный",color:"#f5222d"},{title:"зеленый",color:"#52c41a"},{title:"синий",color:"#1890ff"}];let A=[{first_color:2,second_color:1,congruents:0,direction:1},{first_color:1,second_color:0,congruents:0,direction:1},{first_color:2,second_color:1,congruents:0,direction:1},{first_color:1,second_color:2,congruents:0,direction:1},{first_color:0,second_color:1,congruents:1,direction:0},{first_color:0,second_color:2,congruents:0,direction:1},{first_color:1,second_color:2,congruents:1,direction:0},{first_color:0,second_color:1,congruents:0,direction:1},{first_color:1,second_color:0,congruents:1,direction:0},{first_color:1,second_color:2,congruents:1,direction:0},{first_color:1,second_color:2,congruents:0,direction:1},{first_color:0,second_color:2,congruents:1,direction:0},{first_color:0,second_color:2,congruents:0,direction:1},{first_color:0,second_color:1,congruents:0,direction:1},{first_color:2,second_color:0,congruents:0,direction:1},{first_color:1,second_color:0,congruents:1,direction:0},{first_color:2,second_color:1,congruents:1,direction:0},{first_color:2,second_color:0,congruents:1,direction:0},{first_color:2,second_color:0,congruents:1,direction:0},{first_color:2,second_color:0,congruents:0,direction:1},{first_color:1,second_color:0,congruents:0,direction:1},{first_color:2,second_color:1,congruents:1,direction:0},{first_color:0,second_color:2,congruents:1,direction:0},{first_color:0,second_color:1,congruents:1,direction:0}];A.sort(()=>Math.random()-.5),L(()=>{let i=!0;return n.forEach(t=>{i=i&&t.correctly}),i}),L(()=>{let i=0,t=0;return n.slice(1,-1).forEach(e=>{e.direction?t+=e.reaction_time:i+=e.reaction_time}),{left:i,right:t}}),S(0);const c=x({title:"",color:0,vision:!0,colorize:!0}),d=x({color:0,vision:!0,colorize:!0}),a=x({color:0,vision:!0,colorize:!0}),n=x(y.stroop?y.stroop:[]);n.length&&(l.value="score");let J=24,m=0,P=L(()=>1e7),w=()=>{document.removeEventListener("keyup",w),q()},k=()=>{for(document.removeEventListener("keyup",k),m=0;n.length>0;)n.pop();l.value="prepare",document.addEventListener("keyup",w)},q=()=>{if(m<J){l.value="play";let i=Date.now(),t=A[m];n.push(t);let e=n.length-1,s=e>=0?n[e]:null;s?(t.congruents?(c.title=r[t.first_color].title,c.color=r[t.first_color].color):(c.title=r[t.second_color].title,c.color=r[t.first_color].color),c.vision=!0,d.color=r[s.direction?s.first_color:s.second_color].color,d.vision=!0,a.color=r[s.direction?s.second_color:s.first_color].color,a.vision=!0):(t.congruents?(c.title=r[t.first_color].title,c.color=r[t.first_color].color):(c.title=r[t.second_color].title,c.color=r[t.first_color].color),c.vision=!0,d.vision=!1,a.vision=!1);let B=_=>{let E;if(_.code=="ArrowLeft"||_.code=="KeyA"||_.code=="KeyQ")E=0;else if(_.code=="ArrowRight"||_.code=="KeyD"||_.code=="KeyP")E=1;else return;if(document.removeEventListener("keydown",B),c.vision=!1,d.vision=!1,a.vision=!1,s){let M=Date.now()-i;s.reaction_time=Date.now()-i,M<P.value&&(m+=1),s.correctly=E==s.direction}document.addEventListener("keyup",w)};document.addEventListener("keydown",B)}else O(K(N,"users",z),{stroop:n}),l.value="score"};return(i,t)=>(v(),b("div",W,[u(o("div",{class:"lg:w-40 md:w-24 sm:w-16 w-12",style:p({"background-color":a.color})},null,4),[[f,l.value=="play"&&a.vision&&!1]]),u(o("div",X,[o("div",Y,[Z,o("button",{onClick:t[0]||(t[0]=(...e)=>j(k)&&j(k)(...e)),class:"rounded-lg border p-2 border-neutral-700 bg-white text-neutral-900"},"Начать тест")])],512),[[f,l.value=="init"]]),u(o("div",oo,[o("div",{class:"lg:text-6xl md:text-5xl sm:text-4xl text-3xl text-center font-bold",style:p({color:c.color})},g(c.title.toUpperCase()),5)],512),[[f,l.value=="play"&&c.vision]]),u(o("div",{class:"lg:w-40 md:w-24 sm:w-16 w-12",style:p({"background-color":d.color})},null,4),[[f,l.value=="play"&&d.vision&&!1]]),u(o("div",eo,co,512),[[f,l.value=="prepare"]]),u(o("div",so,[lo,o("table",no,[io,(v(!0),b(T,null,U(n,(e,s)=>(v(),b("tr",null,[o("td",ao,g(s+1)+" "+g(e.correctly?"✔️":"❌"),1),o("td",{class:"pr-3 border",style:p({"background-color":r[e.direction?e.second_color:e.first_color].color})},null,4),o("td",{class:"pr-3 border text-center",style:p({color:r[e.first_color].color})},g(r[e.congruents?e.first_color:e.second_color].title),5),o("td",{class:"pr-3 border",style:p({"background-color":r[e.direction?e.first_color:e.second_color].color})},null,4),o("td",_o,g(e.direction?">":"<"),1),o("td",uo,g(e.reaction_time),1)]))),256))]),o("div",fo,[j(y).gilbert?(v(),$(F,{key:0,to:"gilbert"},{default:C(()=>[V("Далее")]),_:1})):(v(),b("div",po,[G(F,{to:"gilberttraining"},{default:C(()=>[V("Далее")]),_:1})]))])],512),[[f,l.value=="score"]])]))}};export{mo as default};
