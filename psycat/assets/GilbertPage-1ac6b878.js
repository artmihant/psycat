import{s as x,i as G,h as H,r as q,j as O,C as R,o as h,c as f,k as m,x as _,a as e,z as n,F as E,y as z,u as F,d as U,w as W,f as g,J as X,m as I,n as S,t as p,p as Y}from"./index-9f7c2837.js";const Z={class:"h-screen justify-center items-center flex flex-col flex-1 m-auto"},$={class:"relative"},ee={class:"h-screen justify-center flex flex-col flex-1"},te={class:"h-screen justify-center items-center flex flex-col flex-1 m-auto"},le={class:"w-[550px]"},oe=e("p",null,"Сейчас на экране появится 12 квадратов.",-1),se=e("p",null,"Цвет одного отличается от цвета остальных.",-1),re=e("p",null,[g("Нужно как можно быстрее определить, в какой части экрана (правой или левой). от центра расположен этот квадрат, "),e("br"),g(" нажав клавишу "),e("b",null,"Q"),g(" (слева) или "),e("b",null,"P"),g(" (справа)")],-1),ne={class:"text-center"},ce={class:"h-screen flex w-full justify-center"},ae=e("div",{class:"h-screen justify-center flex flex-col flex-0"},[e("h1",null," Приготовьтесь... "),e("p",null,"(нажмите любую клавишу)")],-1),ie=[ae],ue={class:"h-screen flex w-full justify-center"},de={class:"h-screen justify-center flex flex-0 gap-10"},he=e("h2",{class:"mt-48"}," Итоговый счет ",-1),fe={class:"border border-neutral-700"},me=e("tr",null,[e("th",{class:"pr-3 border"}),e("th",{class:"pr-3 border text-center"},"направление"),e("th",{class:"pr-3 border text-center"},"позиция"),e("th",{class:"pr-3 border text-center"},"реакция")],-1),_e={class:"pr-3 border"},pe={class:"pr-3 border text-center"},ve={class:"pr-3 border text-center"},be={class:"pr-3 border text-center"},ye={class:"mt-48 text-center font-bold"},xe=e("button",{class:"rounded-lg border p-2 border-neutral-700 bg-white text-neutral-900"}," Далее ",-1),Be={__name:"GilbertPage",async setup(ge){let v,M;const L=x(70),s=x(10),C=G("uid"),N=([v,M]=H(()=>X(I(S,"users",C))),v=await v,M(),v).data(),w=12,r={A:"#00ab81",B:"#00aa95",C:"#00aaaa",D:"#0095aa",N:"#b2b2b2",B:"#000000"},T=["#ff1100","#ff4400","#ff5f00","#6bff00","#a1ff00","#d7ff00","#0051ff","#0081ff","#00bcff"],a=x("init");function D(t){return Math.floor(Math.random()*t)}const b=q([]);for(let t=0;t<w;t++)b.push({color:r.B});const P=[[0,1],[2,1],[3,4],[5,4],[6,7],[8,7]],k=x(!1);let i=21,y=0,V=6;const A=Array((i-1)/2).fill(0).concat(Array((i-1)/2).fill(1)),u=q(N.gilbert?N.gilbert:[]);u.length&&(a.value="score"),O(()=>{let t=!0;return u.forEach(l=>{t=t&&l.correctly}),t});let J=t=>{let l;t%i==0?(l=D(2),A.sort(()=>Math.random()-.5)):l=A[t%i-1];let d=D(6),o=!0;d+=6*l;let c=P[Math.floor(t/i)][0],Q=P[Math.floor(t/i)][1];return{target_color:c,ground_color:Q,position:d,direction:l,correctly:o}},B=()=>{for(let t=0;t<w;t++)b[t].color=r.N;k.value=!1,document.removeEventListener("keyup",B),K()},j=()=>{for(document.documentElement.requestFullscreen(),document.removeEventListener("keyup",j),y=0;u.length>0;)u.pop();a.value="prepare",document.addEventListener("keyup",B)},K=()=>{y<i*V?(a.value="play",setTimeout(()=>{k.value=!0,setTimeout(()=>{a.value="play";let t=Date.now(),l=J(y);u.push(l);for(let o=0;o<w;o++)b[o].color=T[o==l.position?l.target_color:l.ground_color];let d=o=>{let c;if(o.code=="KeyP")c=0;else if(o.code=="KeyQ")c=1;else return;document.removeEventListener("keydown",d),l&&(l.reaction_time=Date.now()-t,y+=1,l.correctly=c==l.direction),document.addEventListener("keyup",B)};document.addEventListener("keydown",d)},1e3)},250)):(Y(I(S,"users",C),{gilbert:u}),a.value="score")};return(t,l)=>{const d=R("router-link");return h(),f(E,null,[m(e("div",{class:"h-screen flex w-full justify-center",style:n({"background-color":r.N})},[e("div",Z,[e("div",$,[m(e("div",{class:"text-center absolute",style:n([{color:"#222","line-height":"1"},{top:"-"+s.value/2+"mm",left:"-"+s.value/2+"mm"}])},[e("table",null,[e("tr",null,[e("td",{style:n({"border-bottom":"1px solid "+r.B,"border-right":"1px solid "+r.B})},[e("div",{style:n({width:s.value/2+"mm",height:s.value/2+"mm"})},null,4)],4),e("td",{style:n({"border-bottom":"1px solid "+r.B,"border-left":"1px solid "+r.B})},[e("div",{style:n({width:s.value/2+"mm",height:s.value/2+"mm"})},null,4)],4)]),e("tr",null,[e("td",{style:n({"border-top":"1px solid "+r.B,"border-right":"1px solid "+r.B})},[e("div",{style:n({width:s.value/2+"mm",height:s.value/2+"mm"})},null,4)],4),e("td",{style:n({"border-top":"1px solid "+r.B,"border-left":"1px solid "+r.B})},[e("div",{style:n({width:s.value/2+"mm",height:s.value/2+"mm"})},null,4)],4)])])],4),[[_,k.value]]),(h(!0),f(E,null,z(b,(o,c)=>(h(),f("div",{class:"absolute",style:n({width:s.value+"mm",height:s.value+"mm",top:-s.value/2+-L.value*Math.cos(Math.PI/6*(c+.5))+"mm",left:-s.value/2+L.value*Math.sin(Math.PI/6*(c+.5))+"mm","background-color":o.color})},null,4))),256))])])],4),[[_,a.value=="play"]]),m(e("div",ee,[e("div",te,[e("div",le,[oe,se,re,e("div",ne,[e("button",{onClick:l[0]||(l[0]=(...o)=>F(j)&&F(j)(...o)),class:"rounded-lg border p-2 border-neutral-700 bg-white text-neutral-900"},"Начать тест")])])])],512),[[_,a.value=="init"]]),m(e("div",ce,ie,512),[[_,a.value=="prepare"]]),m(e("div",ue,[e("div",de,[he,e("table",fe,[me,(h(!0),f(E,null,z(u,(o,c)=>(h(),f("tr",null,[e("td",_e,p(c+1)+" "+p(o.correctly?"✔️":"❌"),1),e("td",pe,p(o.position),1),e("td",ve,p(o.direction?">":"<"),1),e("td",be,p(o.reaction_time),1)]))),256))]),e("div",ye,[U(d,{to:"thanks"},{default:W(()=>[xe]),_:1})])])],512),[[_,a.value=="score"]])],64)}}};export{Be as default};
